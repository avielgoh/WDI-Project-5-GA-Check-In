<!--Import jQuery -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<!--Import Materialize.js -->
<!-- <script type="text/javascript" src="js/materialize.min.js"></script> -->

<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>

<!--Import Materialize.js -->
<script type="text/javascript" src="js/date_picker/picker.js"></script>
<script type="text/javascript" src="js/date_picker/picker.date.js"></script>

<!-- Import Datepicker.js -->
<script>
  $('.datepicker').pickadate({
    labelMonthNext: 'Next month',
    labelMonthPrev: 'Previous month',
    labelMonthSelect: 'Select a month',
    labelYearSelect: 'Select a year',
    monthsFull: [ 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ],
    monthsShort: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ],
    weekdaysFull: [ 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday' ],
    weekdaysShort: [ 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat' ],
    weekdaysLetter: [ 'S', 'M', 'T', 'W', 'T', 'F', 'S' ],
    today: 'Today',
    clear: 'Clear',
    close: 'Close'
  });
</script>

<!-- <script>
  $('.check-in-form').each(function() {
    this.reset();
  });

</script> -->

<!-- POST email to attendees table -->
<script>

  $('.check-in-email').keypress(function(e) {
    if (e.which == 13) {
      var options = {
        type: "POST",
        url: '/api/attendees',
        data: { email: $('.check-in-email').val() },
        dataType: 'json'
      };

      $.ajax(options).done(function() {
        $('.check-in-button').html('Enjoy the event').css('background-color', '#009688');

        setTimeout(function() {
          $('.check-in-email').val('');
          $('.check-in-button').html('Check in').css('background-color', '#EF5350');;
        }, 1500);
      });
    }
  });

  $('.check-in-button').on('click', function() {
    var options = {
      type: "POST",
      url: '/api/attendees',
      data: { email: $('.check-in-email').val() },
      dataType: 'json'
    };

    $.ajax(options).done(function() {
      $('.check-in-button').html('Enjoy the event').css('background-color', '#009688');

      setTimeout(function() {
        $('.check-in-email').val('');
        $('.check-in-button').html('Check in').css('background-color', '#EF5350');;
      }, 1500);
    });
  });
</script>

<!-- GET attendees list -->
<script>
  $('.export-button').on('click', function() {
    var eventId = $(this).data('event-id');

    var options = {
      type: "GET",
      url: '/download/' + eventId,
      dataType: 'json'
    };

    $.ajax(options).done(function(data) {
      console.log('hello');
      console.log(data);
    });
  });
</script>
